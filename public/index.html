<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Flowchart Canvas - Full Functionality</title>
    <style>
      body,
      html {
        margin: 0;
        padding: 0;
      }
      /* Flexbox container to hold form and right panel side by side */
      #main-container {
        display: flex;
        flex-direction: row;
      }
      #form-container {
        width: 50%;
        padding: 20px;
        box-sizing: border-box;
      }
      #right-panel {
        background-color: lightblue;
        width: 50%;
        padding: 20px;
        box-sizing: border-box;
      }
      canvas {
        display: block;
        background-color: #e0e0e0;
        width: 100vw;
        height: 600px;
      }
    </style>
  </head>
  <body>
    <canvas id="flowchartCanvas"></canvas>

    <!-- Flexbox wrapper for side-by-side layout -->
    <div id="main-container">
      <div id="form-container">
        <h3>Add Nodes! : Drag stuff! Delete them! Make connections!</h3>
        <form id="nodeForm">
          <label for="nodeKey">Key:</label>
          <input type="text" id="nodeKey" required />
          <label for="nodeHuman">Label:</label>
          <input type="text" id="nodeHuman" required />
          <label for="nodeColor">Color:</label>
          <input type="color" id="nodeColor" value="#ffffff" />
          <label for="nodeType">Type:</label>
          <select id="nodeType">
            <option value="box">Box</option>
            <option value="diamond">Diamond</option>
          </select>
          <button type="submit">Add Nodes</button>
        </form>

        <h3>Add Connection (use the 'key' of 2 different nodes)</h3>
        <form id="connectionForm">
          <label for="fromNode">From:</label>
          <input type="text" id="fromNode" required />
          <label for="toNode">To:</label>
          <input type="text" id="toNode" required />
          <label for="lineType">Line Type:</label>
          <select id="lineType">
            <option value="normal">Normal (Black)</option>
            <option value="yes">Yes (Green)</option>
            <option value="no">No (Red)</option>
          </select>
          <button type="submit">Add Connection</button>
        </form>
        <h3>Selected Node Details</h3>
        <div id="selectedNodeDetails">
          <strong>Key:</strong> <span id="nodeKeyDetail">None</span><br/>
          <strong>Label:</strong> <span id="nodeLabelDetail">None</span><br/>
          <strong>Color:</strong> <span id="nodeColorDetail">None</span><br/>
          <strong>Type:</strong> <span id="nodeTypeDetail">None</span><br/>
          <button id="deleteNode" disabled>Delete Selected Node</button>
        </div>
        <br/>

        <button id="saveGraph">Marshal graph to text area: then cut/paste to initialData.json</button>
        <button onclick="scaleNodesToFit()">Rescale to fit your screen!</button>
        <br />
        <textarea id="graphJson" rows="50" cols="80"></textarea>
      </div>

      <!-- âœ… New Right-Side Div -->
      <div id="right-panel">
        <h3>PINIA!</h3>

      </div>
    </div>
    <script src="graph.js" ></script>
  </body>
</html>
